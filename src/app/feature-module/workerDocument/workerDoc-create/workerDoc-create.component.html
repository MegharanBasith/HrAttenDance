<!-- Worker Document Form (shown after initial creation) -->
<form [formGroup]="workerDocForm">
  <div class="card custom-card">
    <div class="card-header border-bottom-0 justify-content-between">
      <div class="card-title">{{ 'Create Worker Document' }}</div>
      <a href="javascript:void(0);" data-bs-toggle="collapse" data-bs-target="#workerdocCreation" aria-expanded="false"
        aria-controls="collapseExample">
        <i class="feather icon-chevron-up fs-18 collapse-open"></i>
        <i class="feather icon-chevron-down collapse-close fs-18"></i>
      </a>
    </div>
    <div class="collapse show border-top" id="workerdocCreation">
      <div class="card-body">
        <div class="row">
          <div class="col-sm-6">
            <div class="input-block mb-3">
              <label class="col-form-label" for="">{{'Document Type'}} <span class="text-danger">*</span></label>
              <mat-select class="custom-mat-select"
                [class.invalid]="workerDocForm.get('DocumentTypeId')?.invalid && workerDocForm.get('DocumentTypeId')?.touched"
                formControlName="DocumentTypeId" placeholder="Select Document Type">
                <mat-option *ngFor="let type of documentTypeList" [value]="type.DocumentTypeId">
                  {{ type.EnglishDescription }}
                </mat-option>
              </mat-select>
              @if (workerDocForm.get('DocumentTypeId')?.invalid &&
              workerDocForm.get('DocumentTypeId')?.touched) {
              <div>
                @if (workerDocForm.get('DocumentTypeId')?.invalid &&
                workerDocForm.get('DocumentTypeId')?.touched)
                {
                <small class="text-danger"> {{'Document Type' }}</small>
                }
              </div>
              }
            </div>
          </div>
          <div class="col-sm-6">
            <app-employee-filter [employeeControl]="employeeControl">
            </app-employee-filter>
          </div>

        </div>

        <div class="row">
          <div class="col-sm-4">
            <div class="input-block mb-3">
              <label class="col-form-label" for="">{{'Request Type'}} <span class="text-danger">*</span></label>
              <input class="form-control" type="text"
                [class.invalid]="workerDocForm.get('RequestType')?.invalid && workerDocForm.get('RequestType')?.touched"
                formControlName="RequestType">
              <mat-error
                *ngIf="workerDocForm.controls['RequestType']?.touched && workerDocForm.controls['RequestType']?.errors?.['required']">
                <small class="text-danger"> {{'RequestType' }}</small>
              </mat-error>
              <mat-error *ngIf="workerDocForm.controls['RequestType']?.errors?.['pattern']">
                <small class="text-danger"> {{ 'Request Type' }} </small>
              </mat-error>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="input-block mb-3">
              <label class="col-form-label" for="">{{'Sadad Number'}} <span class="text-danger">*</span></label>
              <input class="form-control" type="text"
                [class.invalid]="workerDocForm.get('SadadNo')?.invalid && workerDocForm.get('SadadNo')?.touched"
                formControlName="SadadNo">
              <mat-error
                *ngIf="workerDocForm.controls['SadadNo']?.touched && workerDocForm.controls['SadadNo']?.errors?.['required']">
                <small class="text-danger"> {{'SadadNo' }}</small>
              </mat-error>
              <mat-error *ngIf="workerDocForm.controls['SadadNo']?.errors?.['pattern']">
                <small class="text-danger"> {{ 'Sadad No' }} </small>
              </mat-error>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="input-block mb-3">
              <label class="col-form-label" for="">{{'Document Number'}} <span class="text-danger">*</span></label>
              <input class="form-control" type="text"
                [class.invalid]="workerDocForm.get('DocumentNumber')?.invalid && workerDocForm.get('DocumentNumber')?.touched"
                formControlName="DocumentNumber">
              <mat-error
                *ngIf="workerDocForm.controls['DocumentNumber']?.touched && workerDocForm.controls['DocumentNumber']?.errors?.['required']">
                <small class="text-danger"> {{'DocumentNumber' }}</small>
              </mat-error>
              <mat-error *ngIf="workerDocForm.controls['DocumentNumber']?.errors?.['pattern']">
                <small class="text-danger"> {{ 'Document Number' }} </small>
              </mat-error>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-4">
            <div class="input-block mb-3 date-input1">
                <label class="col-form-label" for="">{{'Document Date' }}<span class="text-danger">*</span></label>
                <div class="cal-icon">
                    <input class="form-control datetimepicker" type="text" bsDatepicker
                        container=".date-input1"
                        [class.invalid]="workerDocForm.get('DocumentDate')?.invalid && workerDocForm.get('DocumentDate')?.touched"
                        formControlName="DocumentDate">
                    @if (workerDocForm.get('DocumentDate')?.invalid &&
                    workerDocForm.get('DocumentDate')?.touched) {
                    <div>
                        @if (workerDocForm.get('DocumentDate')?.invalid &&
                        workerDocForm.get('DocumentDate')?.touched) {
                        <small class="text-danger"> {{'Document Date Required'}}</small>}</div>}
                </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="input-block mb-3">
              <label class="col-form-label" for="">{{'Line Amount'}} <span class="text-danger">*</span></label>
              <input class="form-control" type="number"
                [class.invalid]="workerDocForm.get('LineAmount')?.invalid && workerDocForm.get('LineAmount')?.touched"
                formControlName="LineAmount">
              <mat-error
                *ngIf="workerDocForm.controls['LineAmount']?.touched && workerDocForm.controls['LineAmount']?.errors?.['required']">
                <small class="text-danger"> {{'LineAmount' }}</small>
              </mat-error>
              <mat-error *ngIf="workerDocForm.controls['LineAmount']?.errors?.['pattern']">
                <small class="text-danger"> {{ 'Line Amount' }} </small>
              </mat-error>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="input-block mb-3">
              <label class="col-form-label" for="">{{'Period'}} <span class="text-danger">*</span></label>
              <input class="form-control" type="number"
                [class.invalid]="workerDocForm.get('Period')?.invalid && workerDocForm.get('Period')?.touched"
                formControlName="Period">
              <mat-error
                *ngIf="workerDocForm.controls['Period']?.touched && workerDocForm.controls['Period']?.errors?.['required']">
                <small class="text-danger"> {{'Period' }}</small>
              </mat-error>
              <mat-error *ngIf="workerDocForm.controls['Period']?.errors?.['pattern']">
                <small class="text-danger"> {{ 'Period' }} </small>
              </mat-error>
            </div>
          </div>
        </div>
      </div>
      <div class="submit-button-container">
        <button class="btn btn-primary submit-button" [disabled]="workerDocForm.invalid" (click)="createWorkerDoc()"
          *ngIf=" !isWorkerDocSubmitted">{{'submit'}}</button>
      </div>
    </div>
  </div>
</form>

